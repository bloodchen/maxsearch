<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tabbed Iframe</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
        }

        .tabs {
            display: flex;
            justify-content: space-around;
            background-color: #000;
            padding: 5px 0; /* Reduced padding for shorter tabs */
            font-family: Arial, sans-serif;
            font-size: 13px;
        }

        .tab-item {
            display: flex;
            align-items: center;
            color: #fff;
            padding: 5px 10px;
            transition: border-bottom 0.3s;
            text-decoration: none; /* Remove underline for anchor links if any */
            cursor: pointer;
        }

        .tab-item img {
            height: 16px;
            width: 16px;
            margin-right: 5px;
        }

        .tab-item:hover {
            border-bottom: 2px solid #4285f4;
        }

        .tab-item.active {
            border-bottom: 2px solid #fff;
        }

        iframe {
            width: 100%;
            height: calc(100% - 30px); /* Adjusted height to account for the tab height */
            border: none;
        }
    </style>
</head>

<body>
  <div class="tabs">
    </div>

    <iframe id="mainIframe" src="../s/cse.html?q="></iframe>

    <script>
        const tabs = [
            {name:"Google",icon:"https://www.google.com/favicon.ico",url:"../s/cse.html?q="},
            {name:"Bing",icon:"https://www.bing.com/sa/simg/favicon-2x.ico",url:"https://tonline-search.com/results.aspx?gd=RD1003641&searchsource=69&q="}
        ]
        // Create tab elements based on the array
        const tabsContainer = document.querySelector('.tabs');
        tabs.forEach(tab => {
            const tabItem = document.createElement('div');
            tabItem.classList.add('tab-item');
            tabItem.setAttribute('data-url', tab.url);

            const tabIcon = document.createElement('img');
            tabIcon.src = tab.icon;
            tabIcon.alt = `${tab.name} Icon`;

            tabItem.appendChild(tabIcon);
            tabItem.appendChild(document.createTextNode(tab.name));

            tabsContainer.appendChild(tabItem);
        });

        // Make the first tab active by default
        tabsContainer.children[0].classList.add('active');
        
        // JavaScript to handle tab clicks and iframe URL change
        document.querySelectorAll('.tab-item').forEach(tab => {
            tab.addEventListener('click', function () {
                // Remove active class from all tabs
                document.querySelectorAll('.tab-item').forEach(innerTab => {
                    innerTab.classList.remove('active');
                });

                // Set active class to the clicked tab
                this.classList.add('active');

                // Change iframe URL
                document.getElementById('mainIframe').src = this.getAttribute('data-url');
            });
        });

        function getParam(param){
            return new URLSearchParams(window.location.search).get(param);
        }
        const visitedUrls = []
        const iframe = document.getElementById('mainIframe')
        let searchTerm = getParam('q')
        let url = "../s/cse.html?q="
        if(searchTerm){
            url+=searchTerm
        }
        iframe.src = url

        // JavaScript to handle tab clicks and iframe URL change
        document.querySelectorAll('.tab-item').forEach(tab => {
            tab.addEventListener('click', function () {
                // Remove active class from all tabs
                document.querySelectorAll('.tab-item').forEach(innerTab => {
                    innerTab.classList.remove('active');
                });

                // Set active class to the clicked tab
                this.classList.add('active');
                let dataUrl = this.getAttribute('data-url');
                // Change iframe URL
                const iframe = document.getElementById('mainIframe')
                if(iframe){
                    try{
                        let iframeDocument = iframe.contentDocument || iframe.contentWindow.document;
                        // Get an element inside the iframe using any DOM method, e.g., getElementById
                        let input = iframeDocument.querySelector('#gsc-i-id1');
                        if(input&&input.value)
                        searchTerm =input.value
                    }catch(e){
                        console.error(e.message)
                    }
                    console.log("searchTerm:",searchTerm)
                    dataUrl+=searchTerm
                    iframe.src = dataUrl
                }
            });
        });
      // Monitor iframe load event
        document.getElementById('mainIframe').addEventListener('load', function() {
            const iframeUrl = this.contentWindow.location.href; // Get the current iframe URL
            // Access the iframe content
        });
    </script>
</body>

</html>
